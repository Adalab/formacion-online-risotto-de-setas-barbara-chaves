!function(e){var t={};function n(i){if(t[i])return t[i].exports;var s=t[i]={i:i,l:!1,exports:{}};return e[i].call(s.exports,s,s.exports,n),s.l=!0,s.exports}n.m=e,n.c=t,n.d=function(e,t,i){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(n.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)n.d(i,s,function(t){return e[t]}.bind(null,s));return i},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";async function i(){let e=await fetch("https://raw.githubusercontent.com/Adalab/recipes-data/master/rissoto-setas.json");return e=await e.json(),await e.recipe}n.r(t);const s=document.querySelector(".ingredients");function r({product:e,brand:t,items:n,quantity:i,cost:r,id:c,checked:a},d){const o=document.createElement("li");o.classList.add("list-group-item","p-2"),o.innerHTML=`<div id=${c} class="row item">\n      <div class="col-1 ml-2 p-0 d-flex justify-content-center align-items-center">\n        <input class='item__checkbox' type="checkbox" ${(()=>a?"checked":"")()}  />\n      </div>\n      <div class="col-1 p-0 d-flex align-items-center">\n        <input class='item__items text-primary text-center' type="number" min='0' value=${parseInt(n)} style="width: 30px; heigth: 30px" />\n      </div>\n      <div class="col-4">\n        <div class='row'>\n          <p class='item__name m-0'>${e}</p>\n        </div>\n        <div class='row'>\n          ${t?`<small class='item__brand'>${t}</small>`:""}\n        </div>\n        <div class='row'>\n          <small class='item__quantity'>${i}</small>\n        </div>\n      </div>\n      <div class='col-5 pr-5  d-flex justify-content-end align-items-center' >\n        <p class='text-right item__price m-0 text-success'>${r} ${d}</p>\n      </div>\n    </div>\n   `,s.appendChild(o)}class c{constructor(e,t){this.brand=e.brand||"",this.items=e.items,this.price=e.price,this.product=e.product,this.quantity=e.quantity,this.id=t,this.checked=!0}set check(e){this.checked=e}get cost(){return(this.price*this.items).toFixed(2)}}class a{constructor(e){this.ingredients=e.map((e,t)=>new c(e,t)),this.createIngredient=r}renderIngredients(e,t){e.forEach(e=>{this.createIngredient(e,t)})}}const d=document.querySelector(".buy-section");function o({currency:e,items:t,subtotal:n,shippingCost:i,total:s}){const r=document.createElement("div");r.classList.add("cart","card-body","pr-5","pl-5"),r.innerHTML=`<div class="total">\n      <div class='pb-4'>\n        <small id="items">\n          <span >Items: </span>\n          ${t}\n        </small>\n      </div>\n      <p class='d-flex justify-content-between' id="subtotal">\n        <span>Subtotal </span>\n        ${n} ${e}\n      </p>\n      <p class='d-flex justify-content-between' id="send-charges">\n        <span>Gastos de env√≠o </span> \n        ${i} ${e}\n      </p>\n      <p class='d-flex justify-content-between' id="total">\n        Total \n        <span class='h5 text-success'>${s} ${e}</span>\n      </p>\n      <div d-flex align-items-stretch>\n        <button class="btn btn-success w-100" id="buy">Comprar ingredienes: ${s} ${e}</button>\n      </div>\n    </div>`,d.appendChild(r)}class l{constructor(e,t){this._ingredients=t,this._recipe=e,this.createCart=o}get currency(){return this._recipe.currency}get shippingCost(){return parseFloat(this._recipe["shipping-cost"]).toFixed(2)}get items(){return this._ingredients.reduce((e,t)=>e+parseInt(t.items),0)}get subtotal(){let e=this._ingredients.reduce((e,t)=>e+parseFloat(t.cost)*t.items,0);return parseFloat(e).toFixed(2)}get total(){let e=parseFloat(this.subtotal)+parseFloat(this.shippingCost);return parseFloat(e).toFixed(2)}renderCart(e){o(e)}}(new class{constructor(){this.ingredients=[],this.cart={},this.getData=i,this.onChangeCheckBox=this.onChangeCheckBox.bind(this),this.onChangeInput=this.onChangeInput.bind(this),this.onSelect=this.onSelect.bind(this)}async initApp(){const e=await this.getData();this.ingredients=new a(e.ingredients),this.cart=new l(e,this.ingredients.ingredients),this.ingredients.renderIngredients(this.ingredients.ingredients,this.cart.currency),this.cart.renderCart(this.cart),this.addEvents()}clearApp(){document.querySelector(".buy-section").innerHTML="",document.querySelector(".ingredients").innerHTML=""}updateApp(){this.clearApp(),this.ingredients.renderIngredients(this.ingredients.ingredients,this.cart.currency),this.cart.renderCart(this.cart),this.addEvents()}getNewIngredients(e,t,n=!0){const i=e.target.parentElement.parentElement;return(e=>this.ingredients.ingredients.map(t=>(t.id===parseInt(i.id)&&(t.items=e,t.check=n),t)))(t)}onChangeCheckBox(e){e.target.checked?this.ingredients.ingredients=this.getNewIngredients(e,1):this.ingredients.ingredients=this.getNewIngredients(e,0,!1),this.updateApp()}addCheckBoxEvent(){document.querySelectorAll(".item__checkbox").forEach(e=>e.addEventListener("change",this.onChangeCheckBox))}onChangeInput(e){this.ingredients.ingredient=this.getNewIngredients(e,e.target.value),this.updateApp()}addInputEvent(){document.querySelectorAll(".item__items").forEach(e=>e.addEventListener("change",this.onChangeInput))}onSelect(e,t,n){this.ingredients.ingredients.map(e=>(e.check=t,e.items=n,e)),this.updateApp()}addSelectAllEvent(){document.querySelector("#select-all").addEventListener("click",e=>this.onSelect(e,!0,1)),document.querySelector("#deselect-all").addEventListener("click",e=>this.onSelect(e,!1,0))}addEvents(){this.addInputEvent(),this.addCheckBoxEvent(),this.addSelectAllEvent()}}).initApp()}]);